# 디스코드 보안봇 사용법

## 기능 소개

이 봇은 다음과 같은 고급 보안 기능을 제공합니다:

### 🛡️ AI 기반 자동 보안 감시
- **스팸 메시지 감지**: 10초 내 5개 이상 메시지 시 차단
- **악성 링크 차단**: 피싱, 악성코드 도메인 및 단축 URL 차단
- **AI 내용 분석**: Gemini AI를 통한 욕설, 혐오발언, 사기 시도 등 감지
- **해킹 시도 탐지**: 프롬프트 주입, SQL 인젝션, XSS 시도 등 차단
- **개인정보 요구 탐지**: 계정 정보, 카드번호 등 개인정보 요구 차단
- **사기 패턴 탐지**: 투자 사기, 가짜 이벤트 등 사기 시도 차단

### 📊 관리 명령어
- `!상태` 또는 `!status`: 봇 상태 및 통계 확인
- `!권한확인` 또는 `!permissions`: 봇 권한 상태 확인
- `!사용자정보 @유저`: 특정 사용자의 위반 기록 확인
- `!경고초기화 @유저`: 사용자의 경고 횟수 초기화
- `!강제밴 @유저 [사유]`: 사용자 강제 차단
- `!타임아웃 @유저 [시간]`: 사용자 일시 정지

## 🚨 새로운 AI 처벌 시스템

### 자동 처벌 단계
1. **낮은 위험도 (30-50%)**: ⚠️ 경고 + 리액션
2. **중간 위험도 (50-70%)**: ⏰ 30분-1시간 타임아웃 + 메시지 삭제
3. **높은 위험도 (70-90%)**: 🔒 2시간-24시간 타임아웃 + 관리자 알림
4. **치명적 위험도 (90%+)**: 🚨 즉시 차단 + 관리자 알림

### 누적 위반 처리
- **3회 위반**: 자동 차단 (위험도 상관없이)
- **5회 경고**: 15분 타임아웃으로 승격

## 실행 방법

### 1. 자동 실행
```cmd
start_bot.bat 파일을 더블클릭
```

### 2. 수동 실행
```cmd
cd "c:\새 폴더"
pip install -r requirements.txt
python discord_security_bot.py
```

## 설정 변경

`discord_security_bot.py` 파일의 `SecurityConfig` 클래스에서 다음 설정을 변경할 수 있습니다:

```python
self.spam_threshold = 5        # 스팸 기준 메시지 수
self.spam_time_window = 10     # 스팸 감지 시간 (초)
self.warning_threshold = 3     # 제재까지 경고 횟수
self.mute_duration = 300       # 뮤트 시간 (초)
self.max_mentions = 5          # 최대 멘션 수
self.max_message_length = 2000 # 최대 메시지 길이
```

## 주의사항
- 관리자 권한을 가진 사용자는 보안 검사에서 제외됩니다
- 봇이 메시지를 삭제하려면 적절한 권한이 필요합니다
- AI 분석 기능은 인터넷 연결이 필요합니다

## 🔧 권한 설정

### 필수 권한
봇이 제대로 작동하려면 다음 권한들이 반드시 필요합니다:

1. **기본 권한**
   - 메시지 보기 (Read Messages)
   - 메시지 전송하기 (Send Messages)  
   - 임베드 링크 (Embed Links)

2. **처벌 관련 권한**
   - ⚠️ **반응 추가** (Add Reactions) - 경고 리액션용
   - 🗑️ **메시지 관리** (Manage Messages) - 위험 메시지 삭제용
   - ⏰ **멤버 타임아웃** (Timeout Members) - 일시정지용 
   - 🚨 **멤버 차단** (Ban Members) - 영구차단용

### 권한 확인 방법
1. Discord에서 `!권한확인` 명령어 실행
2. 부족한 권한이 있으면 빨간색 ❌ 표시됨
3. 서버 관리자는 봇 역할에 필요한 권한을 부여

### 권한이 없을 때
- 경고: 리액션만 추가됨
- 타임아웃: "권한 없음" 메시지 출력
- 차단: "권한 없음" 메시지 출력 + 관리자 알림

## ⚠️ 주의사항
- 관리자 권한을 가진 사용자는 자동 처벌에서 제외됩니다
- AI 분석 기능은 인터넷 연결이 필요합니다  
- 봇 권한이 부족하면 처벌이 실행되지 않습니다